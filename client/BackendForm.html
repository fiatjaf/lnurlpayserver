<!-- @format -->

<script>
  export var backend = {kind: 'lnd', connection: {}}

  function cleanupBackend() {
    let {endpoint, cert} = backend.connection
    backend.connection = {endpoint, cert}
  }

  var showTLSCert = false
  function toggleTLSCert(e) {
    e.preventDefault()
    showTLSCert = !showTLSCert
  }
</script>

<div>
  <label>
    kind:
    <select bind:value="{backend.kind}" on:change="{cleanupBackend}">
      <option>spark</option>
      <option>lnd</option>
      <option>lntxbot</option>
    </select>
  </label>
  {#if backend.kind == 'spark'}
  <label>
    endpoint:
    <input
      bind:value="{backend.connection.endpoint}"
      placeholder="https://my.sparko:9737/rpc"
    />
  </label>
  <label>key: <input bind:value="{backend.connection.key}"/></label>
  {:else if backend.kind == 'lnd'}
  <label>
    HTTP endpoint:
    <input
      bind:value="{backend.connection.endpoint}"
      placeholder="https://my.lnd:8080"
    />
  </label>
  <label>
    invoice macaroon:
    <textarea rows="5" bind:value="{backend.connection.macaroon}" /> as hex
  </label>
  {/if} {#if showTLSCert}
  <label
    >tls certificate:
    <textarea
      rows="16"
      bind:value="{backend.connection.cert}"
      placeholder="{`-----BEGIN CERTIFICATE-----
  MIICPDCCAeKgAwIBAgIRAMzWW6TGNgkeFEW4QfJY0U0wCgYIKoZI
  MB0GA1UEChMWbG5kIGF1dG9nZW5lcmF0ZWQgY2VydDEUMBIGA1UE
  YXdlcmswHhcNMTkxMTIxMTkyOTU3WhcNMjEwMTE1MTkyOTU3WjA3
  ExZsbmQgYXV0b2dlbmVyYXRlZCBjZXJ0MRQwEgYDVQQDEwtib2ht
  MBMGByqGSM49AgEGCCqGSM49AwEHA0IABMtmmd3yz4f+pY4qKVl8
  NAzrdotd+ZbM5mu7h5OMVMPtJ9LBnl0ovCBF15qBlWlpoO/bgGRh
  DgYDVR0PAQH/BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wgacGA1Ud
  Ym9obS1iYXdlcmuCCWxvY2FsaG9zdIIEdW5peIIKdW5peHBhY2tl
  AAAAAAAAAAAAAAAAAAAAAYcEwKgPB4cECpMRE4cEwKg4AYcQKAQH
  /oXS3IcQ/oAAAAAAAADqQPL//oXS3IcQ/oAAAAAAAAA0AlH//mk9
  AAAIACf//gAAADAKBggqhkjOPQQDAgNIADBFAiA/64u25xBr+/CQ
  URFBB1y4AyysJe24lwIhAKyTkeIHCW1DwTGxQH9tfTlHfL1USABD
  -----END CERTIFICATE-----`}"
    />
  </label>
  {:else}
  <button on:click="{toggleTLSCert}">
    include tls cert?
  </button>
  {/if}
</div>
